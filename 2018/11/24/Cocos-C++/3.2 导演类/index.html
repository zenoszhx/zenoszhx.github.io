<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword" content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        3.2 导演类 - undefined
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> 一些个人的总结，辩证来看，不保证完全正确。 </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.png">
        </div>
        <div class="name">
            <i>Zenos</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li>
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li>
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li>
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-导演类的使用方法"><span class="toc-text">1. 导演类的使用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-导演类中与场景有关的函数"><span class="toc-text">2. 导演类中与场景有关的函数</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input">
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> 一些个人的总结，辩证来看，不保证完全正确。 </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        3.2 导演类
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2018-11-24 11:37:30</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#Cocos-C++" title="Cocos-C++">Cocos-C++</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>

    </div>
    <div class="post-content ">
        <p>#导演类</p>
<p>导演类在引擎中发挥的主要作用：</p>
<p>1).管理、显示场景。</p>
<p>2).持有Cocos2D-X引擎的配置细节。</p>
<p>3).维持与设备窗口、OpenGL视窗对象的联系。</p>
<p>4).反馈来自操作系统的应用响应，比如暂停、恢复和结束游戏。</p>
<p>5).在引擎世界和OpenGL之间进行坐标转换。</p>
<h3 id="1-导演类的使用方法"><a href="#1-导演类的使用方法" class="headerlink" title="1. 导演类的使用方法"></a>1. 导演类的使用方法</h3><p>导演对象负责创建、管理应用程序或者游戏的主窗口。在特定条件下显示、执行某个场景。</p>
<p>在代码中，导演是一个单例对象。</p>
<pre><code>bool AppDelegate::applicationDidFinishLaunching()
{
    auto director = Director::getInstance();
    auto glview = director-&gt;getOpenGLView();
    if(!glview)
    {
        glview = GLViewImpl::create(&quot;Cpp Empty Test&quot;);
        director-&gt;setOpenGLView(glview);
    }
    director-&gt;setOpenGLView(glview);

    #if (CC_TARGET_PLATFORM == CC_PLATFORM_WP8)
        glview-&gt;setDesignResolutionSize(disignResolutionSize.width, designResolutionSize.height, ResolutionPolicy::SHOW_ALL);
    #else
        glview-&gt;setDesignResolutionSize(disignResolutionSize.width, designResolutionSize.height, ResolutionPolicy::SHOW_ALL);
    #endif

    Size frameSize = glview-&gt;getFrameSize();
    vector&lt;string&gt; searchPath;
    if (frameSize.height &gt; mediumResource.size.height)
    {
        searchPath.push_back(largeResource.directory);
        director-&gt;setContentScaleFactor(MIN(largeResource.size.height/designResolutionSize.height, largeResource.size.width/designResolutionSize.width));
    } else if (frameSize.height &gt; smallResource.size.height) {
        searchPath.push_back(mediaResource.directory);
        director-&gt;setContentScaleFactor(MIN(mediaResource.size.height/designResolutionSize.height, mediaResource.size.width/designResolutionSize.width));
    } else {
        searchPath.push_back(smallResource.directory);
        director-&gt;setContentScaleFactor(MIN(smallResource.size.height/designResolutionSize.height, smallResource.size.width/designResolutionSize.width));
    }

    FileUtils::getInstance()-&gt;setSearchPath(searchPath);
    director-&gt;setDisplayStats(true);
    director-&gt;setAnimationInterval(1.0/60);
    auto scene = HelloWorld::scene();
    director-&gt;runWithScene(scene);
    return ture;
}

1.首先通过静态函数Director::getInstance();来创建单例对象。之后的代码中，再次调用此函数来获取导演类对象，返回的也是首次创建的单例例对象。
2.代码中创建了一个GLView对象，这是一个用OpenGL ES来绘制的界面，将创建的openflView传递给导演，好比将摄像机交给导演。
3.接下来的代码中，根据设备显示尺寸选择了不同的资源路径，开启了显示游戏画面刷新率，将显示界面传递至设备窗口、设置统计格式、用导演对象来运行场景。
4.在类Director代码中，为了便于管理场景对象，采用了队列方式来管理场景对象。
</code></pre><h3 id="2-导演类中与场景有关的函数"><a href="#2-导演类中与场景有关的函数" class="headerlink" title="2. 导演类中与场景有关的函数"></a>2. 导演类中与场景有关的函数</h3><pre><code>// 运行一个场景 
void runWithScene(Scene *scene);
// 压入当前活动场景，使其进入等待状态
void pushScene (Scene *scene);
// 从队列顶端弹出一个场景对象
void popScene (void);
// 从队列底部弹出所有场景对象，仅剩根部场景对象
void popToRootScene (void);
// 替换新的场景对象
void replaceScene (Scene *scene);
// 结束执行，释放当前场景
void end (void);
// 暂停运行的场景
void pause (void);
// 恢复运行的场景
void resume (void);
// 绘制当前场景
void drawScene (void);

1.runWith用于运行一个场景，除了显示场景的内容外还接受用户在场景中的操作。
2.pushScene需要停止当前正在运行的场景并压栈入场景队列，将传入场景设置为当前执行场景。
3.popScene恢复压入场景队列中的最后一个场景，当前队列顶端的场景将被释放，。如果当前队列中没有没有等待执行的场景，系统自动退出，调用end函数。
4.replaceScene是直接用一个场景直接用一个场景取代当前场景并释放的函数。
5.end结束场景的运行。
6.pause暂停场景运行。
7.resume则用来恢复场景运行。
</code></pre>
        
        <br>
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = ""
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
