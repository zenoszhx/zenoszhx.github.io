<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword" content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        3.4 Layer - undefined
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> 一些个人的总结，辩证来看，不保证完全正确。 </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.png">
        </div>
        <div class="name">
            <i>Zenos</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li>
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li>
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li>
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Layer"><span class="toc-text">Layer</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Layer的头文件定义"><span class="toc-text">1. Layer的头文件定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-LayerColor颜色层"><span class="toc-text">2. LayerColor颜色层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-其他"><span class="toc-text">3.其他</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-LayerGradient——颜色图层的特殊子类"><span class="toc-text">3.1 LayerGradient——颜色图层的特殊子类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-Menu-菜单图层"><span class="toc-text">3.2 Menu 菜单图层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-LayerMultiplex-复合层"><span class="toc-text">3.3 LayerMultiplex 复合层</span></a></li></ol></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input">
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> 一些个人的总结，辩证来看，不保证完全正确。 </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        3.4 Layer
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2018-11-24 11:37:30</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#Cocos-C++" title="Cocos-C++">Cocos-C++</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>

    </div>
    <div class="post-content ">
        <h1 id="Layer"><a href="#Layer" class="headerlink" title="Layer"></a>Layer</h1><p>在一个场景中可以有多个图层，图层之间可以想到叠加，引擎中的图层对象包含了3个功能：</p>
<p>1）.接受用户操作，比如触屏、重力加速计的信息。</p>
<p>2）.作为游戏内容元素的容器，用于显示游戏画面、承载精灵类、字体文本等对象。</p>
<p>3）.填充游戏背景颜色</p>
<h3 id="1-Layer的头文件定义"><a href="#1-Layer的头文件定义" class="headerlink" title="1. Layer的头文件定义"></a>1. Layer的头文件定义</h3><pre><code>class CC_DLL Layer:public Node, pbulic TouchDelegate, CCAcceletometerDelegate, public CCKeypadDelegate
{
publick:
    Layer();
    virtual ~layer();
    bool init();                  // 初始化函数
    static Layer *create(void);      // 创建图形对象的

    // 用户操作函数，单点触碰
    virtual bool onTouchBegan(Touch *touch, Event *unused_event);
    virtual void onTouchMoved(Touch *touch, Event *unused_event);
    virtual void onTouchEnded(Touch *touch, Event *unused_enent);
    virtual void onTouchCancelled(Touch *touch, Event *unused_event);

    // 用户操作函数，多点触碰
    virtual void onTouchesBegan(const std::vector&lt;Touch *&gt; touches, Event *unused_event);
    virtual void onTouchesMoved(const std::vector&lt;Touch *&gt; touches, Event *unused_event);
    virtual void onTouchesEnded(const std::vector&lt;Touch *&gt; touches, Event *unused_event);
    virtual void onTouchesCancelled(const std::vector&lt;Touch *&gt; touches, Event *unused_event);

    // 加速度信息
    virtual void onAcceleration(Acceleration *acc, Event *unused_event);
    // 返回是否接受加速度计的信息
    CC_DEPRECATED_ATTRIBUTE bool isAccelerometerEnabled();
    // 设置图层是否接受加速度计的信息
    CC_DEPRECATED_ATTRIBUTE void setAccelerometerEnabled();
    // 设置加速度计的时间间隔
    CC_DEPRECATED_ATTRIBUTE void setAccelerometerInterval();

    // 注册触碰事件
    CC_DEPRECATED_ATTRIBUTE virtual void registerWithEventDispathcer(void);
    // 返回图层是否接受触碰事件
    CC_DEPRECATED_ATTRIBUTE bool isTouchEnable();
    // 设置图层是否接受触碰事件
    CC_DEPRECATED_ATTRIBUTE void setTouchEnable(bool value);
    // 设置触碰方式是同时响应，不是逐个响应
    CC_DEPRECATED_ATTRIBUTE void setTouchMode(Touch::DispatchMode mode);
    // 返回触碰方式
    CC_DEPRECATED_ATTRIBUTE virtual Touch::DispatchMode getTouchMode():

    // 返回是否接受键盘按键
    CC_DEPRECATED_ATTRIBUTE bool isKeypadEnabled();
    // 设置是否接受键盘按键
    CC_DEPTECATED_ATTRIBUTE boid setKeypadEnabled(bool value);
}

注意：
1.默认情况下，图层是不接受用户操作的，需要调用函数来开启图层将要接受的用户操作。
</code></pre><h3 id="2-LayerColor颜色层"><a href="#2-LayerColor颜色层" class="headerlink" title="2. LayerColor颜色层"></a>2. LayerColor颜色层</h3><p>颜色层可以按照RGB设置填充颜色，同时还可以设置透明度。在游戏中主要用来烘托背景。比如，需要暂停的时候可以创建一个半透明的颜色层来遮挡游戏内容，显示暂停菜单。</p>
<pre><code>class CC_DLL LayerColor:public Layer, public BlendProtocol
{
public:
    LayerColor ();
    virtual ~LayerColor ();

    // 绘制函数
    virtual draw();
    // 设置图层尺寸
    virtual void setContentSize(const Size &amp; var);

    // 创建函数
    static LayerColor *create();
    static LayerColor *create(const Color4B&amp; color);
    static LayerColor *create(const Color4B &amp; color, GLfloat width, GLfloat height);

    // 初始化
    virtual bool init();
    virtual bool init(const Color4B&amp; color);
    virtual bool init(const Color4B&amp; color, GLfolat width, GLfloat height);

    // 改变大小
    void changeWidth(GLfloat w);
    void changeHeight(GLfloat h);
    void changeWidthAndHeight(GLfloat w, GLfloat h);

    // 图层混合属性及函数
    virtual const BlendFunc&amp; getBlendFunc() const override;
    virtual void setBlenFunc(const BlendFunc&amp; blendFunc) override;
}

注：
1.颜色图层包含了绘制的内容，所以需要重载来自Node的draw函数。
</code></pre><h3 id="3-其他"><a href="#3-其他" class="headerlink" title="3.其他"></a>3.其他</h3><h5 id="3-1-LayerGradient——颜色图层的特殊子类"><a href="#3-1-LayerGradient——颜色图层的特殊子类" class="headerlink" title="3.1 LayerGradient——颜色图层的特殊子类"></a>3.1 LayerGradient——颜色图层的特殊子类</h5><p>LayerGradient是LayerColor的一个子类，是具有颜色渐变效果的颜色图层。<br>创建函数中需要传入开始颜色和结束颜色，开始透明度和结束透明度。</p>
<h5 id="3-2-Menu-菜单图层"><a href="#3-2-Menu-菜单图层" class="headerlink" title="3.2 Menu 菜单图层"></a>3.2 Menu 菜单图层</h5><p>这是一个以按钮对象为集合的UI图层。</p>
<h5 id="3-3-LayerMultiplex-复合层"><a href="#3-3-LayerMultiplex-复合层" class="headerlink" title="3.3 LayerMultiplex 复合层"></a>3.3 LayerMultiplex 复合层</h5><p>可以包含多个层的复合层，通常被用来制作游戏内容的主画面。</p>

        
        <br>
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = ""
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
