<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>3.6 文字与字体 | ArrayStars</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="文字与字体通常在游戏中存在两种文字方式：美术字及排版字。既美术人员制作的纹理图片和字体库。 下图展示了引擎用于处理文字的三个类：LabelAtlas、LabelBMFont、LabelTTF。  1.TTF类型标签TTF（True Type Font）从继承关系来看，此类的另一个父类就是Sprite，说明可以把TTF当精灵对象来使用。 1.1 此类标签的优缺点如下：1).TTF字体中包含了某种语言">
<meta name="keywords" content="Cocos-C++">
<meta property="og:type" content="article">
<meta property="og:title" content="3.6 文字与字体">
<meta property="og:url" content="http://yoursite.com/2018/11/24/Cocos-C++/3.6 文字与字体/index.html">
<meta property="og:site_name" content="ArrayStars">
<meta property="og:description" content="文字与字体通常在游戏中存在两种文字方式：美术字及排版字。既美术人员制作的纹理图片和字体库。 下图展示了引擎用于处理文字的三个类：LabelAtlas、LabelBMFont、LabelTTF。  1.TTF类型标签TTF（True Type Font）从继承关系来看，此类的另一个父类就是Sprite，说明可以把TTF当精灵对象来使用。 1.1 此类标签的优缺点如下：1).TTF字体中包含了某种语言">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://7xqzxs.com1.z0.glb.clouddn.com/0114%E6%96%87%E5%AD%97%E5%AD%97%E4%BD%93%E7%BB%A7%E6%89%BF.png">
<meta property="og:updated_time" content="2018-11-24T03:53:56.581Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="3.6 文字与字体">
<meta name="twitter:description" content="文字与字体通常在游戏中存在两种文字方式：美术字及排版字。既美术人员制作的纹理图片和字体库。 下图展示了引擎用于处理文字的三个类：LabelAtlas、LabelBMFont、LabelTTF。  1.TTF类型标签TTF（True Type Font）从继承关系来看，此类的另一个父类就是Sprite，说明可以把TTF当精灵对象来使用。 1.1 此类标签的优缺点如下：1).TTF字体中包含了某种语言">
<meta name="twitter:image" content="http://7xqzxs.com1.z0.glb.clouddn.com/0114%E6%96%87%E5%AD%97%E5%AD%97%E4%BD%93%E7%BB%A7%E6%89%BF.png">
  
    <link rel="alternate" href="/atom.xml" title="ArrayStars" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ArrayStars</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">一些个人的总结，辩证来看，不保证完全正确。</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Cocos-C++/3.6 文字与字体" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/24/Cocos-C++/3.6 文字与字体/" class="article-date">
  <time datetime="2018-11-24T03:37:30.701Z" itemprop="datePublished">2018-11-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Cocos2d-C/">Cocos2d-C++</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      3.6 文字与字体
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="文字与字体"><a href="#文字与字体" class="headerlink" title="文字与字体"></a>文字与字体</h1><p>通常在游戏中存在两种文字方式：美术字及排版字。既美术人员制作的纹理图片和字体库。</p>
<p>下图展示了引擎用于处理文字的三个类：LabelAtlas、LabelBMFont、LabelTTF。</p>
<p><img src="http://7xqzxs.com1.z0.glb.clouddn.com/0114%E6%96%87%E5%AD%97%E5%AD%97%E4%BD%93%E7%BB%A7%E6%89%BF.png" alt=""></p>
<h3 id="1-TTF类型标签"><a href="#1-TTF类型标签" class="headerlink" title="1.TTF类型标签"></a>1.TTF类型标签</h3><p>TTF（True Type Font）从继承关系来看，此类的另一个父类就是Sprite，说明可以把TTF当精灵对象来使用。</p>
<h5 id="1-1-此类标签的优缺点如下："><a href="#1-1-此类标签的优缺点如下：" class="headerlink" title="1.1 此类标签的优缺点如下："></a>1.1 此类标签的优缺点如下：</h5><p>1).TTF字体中包含了某种语言中所有的字母及符号，可以随意调整大小、颜色。</p>
<p>2).TTF标准得到了普及，操作系统中已经提供了多种字体，开发者无需提供任何编辑就可使用。</p>
<p>3).包含内容较多，初始化的时候需要创建纹理图片，所以创建和更新的过程会比较缓慢。</p>
<h5 id="1-2-创建函数"><a href="#1-2-创建函数" class="headerlink" title="1.2 创建函数"></a>1.2 创建函数</h5><pre><code>// 参数为文字内容、字体名称、字体尺寸
static Label create(const std::string&amp; string, const std::string&amp; fontNane, float fontSize);

// 参数为文字内容、字体名称、字体尺寸、标签尺寸、对齐方式
static Label create(const std::string&amp; string, const std::string&amp; fontName, float fontSize, const Size&amp; dimension, CCTextAlignment hAlignment);

// 参数为文字内容、字体名称、字体尺寸、标签尺寸、对齐方式、文字竖直对齐方式
static Label create(const std::string&amp; string, const std::string&amp; fontName, float fontSize, const Size&amp; dimension, CCTextAlignment hAlignment， CCVerticalTextAligment vAlignment);
</code></pre><h3 id="2-BMFont标签"><a href="#2-BMFont标签" class="headerlink" title="2.BMFont标签"></a>2.BMFont标签</h3><p>从继承关系看，BMFont继承自类CCSpriteBatchNode。</p>
<h5 id="2-1-BMFont特点"><a href="#2-1-BMFont特点" class="headerlink" title="2.1 BMFont特点"></a>2.1 BMFont特点</h5><p>1).需要一个图片编辑器， 用于编辑文字的纹理图集。</p>
<p>2).具备了很快的创建以及更新速度。</p>
<p>3).自由度非常的高，每一个字母和符号都是单独的精灵。</p>
<p>4).自制字体的方式，开发者可以自定义其中的字母以及符号，甚至包含阴影。外框及花纹。</p>
<h5 id="2-2-BMFont示例项目"><a href="#2-2-BMFont示例项目" class="headerlink" title="2.2 BMFont示例项目"></a>2.2 BMFont示例项目</h5><pre><code>Atlas3::Atlas3()
{
    m_time = 0;
    // 创建一个颜色图层
    LayerColor* col = LayerColor::create(ccc4(128, 128, 128, 255));
    addChild(col, -1);

    // 使用字体资源文件，创建一个LabelBMFont对象
    LoabelBMFont* label1 = LabelBMFont::create(&quot;Test&quot;, &quot;fonts/bitMapFontTest2.fnt&quot;);
    // 设置字体锚点，以及执行一个淡进淡出的动作效果
    label1-&gt;setAnchorPoint(Vec2(0, 0));
    addChild(lable1, 0, kTagBitmapAtlas1);
    ActionInterval *fade = FadeOut::create(1.0f);
    ActionInterval *fad_in = fade-&gt;reverse();
    FiniteTimeAction *seq = Sequence::create(fade, fade_in, NULL);
    Action *repeat = RepeatForever::create((ActionInterval *)seq);
    label1-&gt;runAction(repeat);

    // 设置位置
    Size s = Director::getInstance()-&gt;getWinSize();
    label1-&gt;setPositon(VisibleRect::leftBottom());

    // 开启定时器回调函数
    schedule(schedule_selector(Atlas3::step))
}

// 更新显示文字
void Atlas3::step(float dt)
{
    m_time += dt;
    char string[15] = {0};

    LabelBMFont *label1 = (LabelBMFont*) getChildByTag(kTagBitmapAtlas1);
    label1-&gt;setString(string);
}
</code></pre><h3 id="3-Atlas标签"><a href="#3-Atlas标签" class="headerlink" title="3.Atlas标签"></a>3.Atlas标签</h3><p>Atlas 标签类的父类是AtlasNode，这是一个纹理图集的类，可以将纹理图片按照矩形区域分隔显示。</p>
<h5 id="3-1-Atlas类的特点"><a href="#3-1-Atlas类的特点" class="headerlink" title="3.1 Atlas类的特点"></a>3.1 Atlas类的特点</h5><p>1).Atlas与TTF类相似，只不过TTF标签会创建一张绘制着文字的图片。而Atlas不会创建任何纹理图片。</p>
<p>2).Atlas标签只会使用源纹理图片进行创建，Atlas创建速度要远远超过TTF。</p>
<p>3).LabelAtlas类中每一个字母或符号都是独特的，它们可以有灵活可变的样式各尺寸。</p>
<p>4).LabelAtlas中字母和符号也是可以由开发者制定。</p>
<pre><code>// 全参数创建函数
static LabelAtlas* create(const std::string&amp; label, const std::string&amp; charMapFile, ssize_t itemWidth, ssize_t itemHeight, ssize_t startCharMap);
</code></pre><h5 id="3-2-示例项目"><a href="#3-2-示例项目" class="headerlink" title="3.2 示例项目"></a>3.2 示例项目</h5><pre><code>LabelAtlasTest::LabelAtlasTest()
{
    m_time = 0;

    // 创建Atlas标签对象
    LabelAtlas *label = LabelAtlas::create(&quot;123 Test&quot;, &quot;fonts/tuffy_bold_italic-charmap.plist&quot;);
    addChild(label, 0, kTagSprite1);
    label-&gt;setPosition(Vec(10, 100));
    // 设置透明度
    label-&gt;SetOpacity(200);

    schedule(schedule_selecotr(LabelAtlasTest::step));
}
</code></pre><h3 id="4-综合类Label标签类"><a href="#4-综合类Label标签类" class="headerlink" title="4.综合类Label标签类"></a>4.综合类Label标签类</h3><p>3.x中新加了Label类，这个类量上面所介绍的LabelTTF、LabelBMFont、LabelAtlas的一个综合类，提供了创建这三个类的新方法，并增加了字体描边、添加阴影、字体外发光的方法。</p>
<h5 id="4-1-Label中所有新功能示例"><a href="#4-1-Label中所有新功能示例" class="headerlink" title="4.1 Label中所有新功能示例"></a>4.1 Label中所有新功能示例</h5><pre><code>LabelTTFDynamicAlignment::LabelTTFDynamicAligment()
{
    auto size = Director::getInstance()-&gt;getWinSize();
    TTFConfig ttfConfig(&quot;font/arial.ttf&quot;, 23);
    _label = Label::createWithTTF(ttfConfig, LongSentencesExample, TextHAligment::CENTER, size.width);
    _label-&gt;setPosition(Vec2(size.width/2, size.height/2));

    addChild(_label);
    this-&gt;addChild(menu);
}
</code></pre><h5 id="4-2-TTFConfig结构体"><a href="#4-2-TTFConfig结构体" class="headerlink" title="4.2 TTFConfig结构体"></a>4.2 TTFConfig结构体</h5><p>TTFConfig是一个结构体，其中定义了TTFlabel所需的几个参数，如下面代码所示。</p>
<pre><code>typedef struct _ttfConfig
{
    std::string fontFilePath;
    int fontSize;
    GlyphCollection glyphs;
    const char *customGlyphs;
    bool distanceFieldEnabled;
    int outlineSize;

    _ttfConfig(const char* filePath = &quot;&quot;, int size = 12, const GlypnCollection&amp; glyphCollection = GlypnCollection::DYNAMIC);
}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/24/Cocos-C++/3.6 文字与字体/" data-id="cjov31rkb004588riclv03s1a" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Cocos-C/">Cocos-C++</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/11/24/Cocos-C++/4 UI/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          4 UI
        
      </div>
    </a>
  
  
    <a href="/2018/11/24/Cocos-C++/3.5 Sprite/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">3.5 Sprite</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Cococs2d与OpenGL-ES/">Cococs2d与OpenGL ES</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Cocos2d-C/">Cocos2d-C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Cocos2d-Lua/">Cocos2d-Lua</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Cocos2d与OpenGL-ES/">Cocos2d与OpenGL ES</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cococs2d与OpenGL-ES/">Cococs2d与OpenGL ES</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cocos-C/">Cocos-C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cocos-Lua/">Cocos-Lua</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lua/">Lua</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Cococs2d与OpenGL-ES/" style="font-size: 12.5px;">Cococs2d与OpenGL ES</a> <a href="/tags/Cocos-C/" style="font-size: 20px;">Cocos-C++</a> <a href="/tags/Cocos-Lua/" style="font-size: 17.5px;">Cocos-Lua</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Lua/" style="font-size: 15px;">Lua</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/11/24/Cocos-C++-P/3.2 精灵/">3.2 精灵</a>
          </li>
        
          <li>
            <a href="/2018/11/24/Cocos-C++-P/3.1（2） 纹理压缩及应用/">3.1(2) 纹理压缩及应用</a>
          </li>
        
          <li>
            <a href="/2018/11/24/Cocos-C++-P/3.1（1） 纹理/">3.1 纹理</a>
          </li>
        
          <li>
            <a href="/2018/11/24/Cocos-C++-P/3 全新的绘制系统/">全新的绘制系统</a>
          </li>
        
          <li>
            <a href="/2018/11/24/Cocos-C++-P/2.2 OpenGL ES 着色程序/">OpenGL ES着色程序</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Zenos<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>