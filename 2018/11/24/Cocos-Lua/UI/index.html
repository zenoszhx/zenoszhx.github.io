<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>UI | ArrayStars</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="UIalign和valign参数可用的值：  cc.TEXT_ALIGNMENT_LEFT 左对齐 cc.TEXT_ALIGNMENT_CENTER 水平剧中对齐 cc.TEXT_ALIGNMENT_RIGHT 左对齐 cc.VERTICAL_TEXT_ALIGNMENT_TOP 垂直顶部对齐 cc.VERTICAL_TEXT_ALIGNMENT_CENTER 垂直居中对齐 cc.VERTICAL">
<meta name="keywords" content="Cocos-Lua">
<meta property="og:type" content="article">
<meta property="og:title" content="UI">
<meta property="og:url" content="http://yoursite.com/2018/11/24/Cocos-Lua/UI/index.html">
<meta property="og:site_name" content="ArrayStars">
<meta property="og:description" content="UIalign和valign参数可用的值：  cc.TEXT_ALIGNMENT_LEFT 左对齐 cc.TEXT_ALIGNMENT_CENTER 水平剧中对齐 cc.TEXT_ALIGNMENT_RIGHT 左对齐 cc.VERTICAL_TEXT_ALIGNMENT_TOP 垂直顶部对齐 cc.VERTICAL_TEXT_ALIGNMENT_CENTER 垂直居中对齐 cc.VERTICAL">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-11-24T03:35:25.847Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="UI">
<meta name="twitter:description" content="UIalign和valign参数可用的值：  cc.TEXT_ALIGNMENT_LEFT 左对齐 cc.TEXT_ALIGNMENT_CENTER 水平剧中对齐 cc.TEXT_ALIGNMENT_RIGHT 左对齐 cc.VERTICAL_TEXT_ALIGNMENT_TOP 垂直顶部对齐 cc.VERTICAL_TEXT_ALIGNMENT_CENTER 垂直居中对齐 cc.VERTICAL">
  
    <link rel="alternate" href="/atom.xml" title="ArrayStars" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ArrayStars</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">一些个人的总结，辩证来看，不保证完全正确。</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Cocos-Lua/UI" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/24/Cocos-Lua/UI/" class="article-date">
  <time datetime="2018-11-24T03:29:19.156Z" itemprop="datePublished">2018-11-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Cocos2d-Lua/">Cocos2d-Lua</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      UI
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="UI"><a href="#UI" class="headerlink" title="UI"></a>UI</h1><p>align和valign参数可用的值：</p>
<ul>
<li>cc.TEXT_ALIGNMENT_LEFT 左对齐</li>
<li>cc.TEXT_ALIGNMENT_CENTER 水平剧中对齐</li>
<li>cc.TEXT_ALIGNMENT_RIGHT 左对齐</li>
<li>cc.VERTICAL_TEXT_ALIGNMENT_TOP 垂直顶部对齐</li>
<li>cc.VERTICAL_TEXT_ALIGNMENT_CENTER 垂直居中对齐</li>
<li>cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM 垂直底部对齐</li>
</ul>
<h3 id="1-文本标签"><a href="#1-文本标签" class="headerlink" title="1 文本标签"></a>1 文本标签</h3><h5 id="1-1-TTF"><a href="#1-1-TTF" class="headerlink" title="1.1 TTF"></a>1.1 TTF</h5><p>字体库规范</p>
<p>创建方式：</p>
<pre><code>display.newTTFLabel(parames)
</code></pre><p>属性：</p>
<ul>
<li>text：显示文本</li>
<li>font：字体名</li>
<li>size：字体大小</li>
<li>color：文字颜色</li>
<li>align：水平对齐方式</li>
<li>valign：垂直对齐方式</li>
<li>dimensions：文字显示对象的尺寸（可选）。用cc.size创建</li>
<li>x</li>
<li>y</li>
</ul>
<p>例：</p>
<pre><code>-- 左对齐，并且多行文字顶部对齐
local label = display.newTTFLabel({
    text = &quot;Hello World\n 您好世界&quot;,
    font = &quot;Markr Felt&quot;,
    size = 64,
    color = cc.c3b(255, 0, 0),
    align = cc.TEXT_ALGNMENT_CENTER,
    valign = cc.VERTICAL_TEXT_ALIGNMENT_TOP,
    dimensions = cc.size(400, 200)
})
</code></pre><h5 id="1-2-BMFont"><a href="#1-2-BMFont" class="headerlink" title="1.2 BMFont"></a>1.2 BMFont</h5><p>适用于频繁更新的场合，需要使用图片来创建字体。</p>
<p>使用前需要添加.png和一个字体坐标文件.fnt。</p>
<p>通常用来显示英文、数字等数量有限的文本。</p>
<p>创建方式：</p>
<pre><code>display.newBMFontLabel(params)
</code></pre><p>参数：</p>
<ul>
<li>text</li>
<li>font：字体的文件名</li>
<li>align：</li>
<li>maxLineWidth:最大行宽</li>
<li>offsetX：图像的X的偏移量</li>
<li>offsetY：图像Y的偏移量</li>
<li>x</li>
<li>y</li>
</ul>
<p>例:</p>
<pre><code>local labelbmf = display.newBMFontLabel({
    text = &quot;Hello&quot;,
    font = &quot;helvetica-32.fnt&quot;
})
</code></pre><h5 id="1-3-UILabel"><a href="#1-3-UILabel" class="headerlink" title="1.3 UILabel"></a>1.3 UILabel</h5><p>创建方式：</p>
<pre><code>cc.ui.UILabel.new({UILabelType = 2, text = &quot;Hello, World&quot;, size = 64})
    :algn(display.CENTER, display.cx, display.cy)
    :addTo(self)
</code></pre><p>参数：和TTFLabel与BMFontLabel相同。</p>
<h3 id="2-按钮"><a href="#2-按钮" class="headerlink" title="2 按钮"></a>2 按钮</h3><p>三个表现按钮仅是表现形式不一样，但内在的事件行为都继承自UIButton，可监听的事件如下：</p>
<ul>
<li>CLICKED，单击。UIButton:onButtonClicked(callback)监听</li>
<li>PRESSED，按下。UIButton:onButtonPressed(callback)监听</li>
<li>PELEASE，释放。UIButton:onButtonRelease(callback)监听</li>
<li>STATE_CHANGED，状态改变。UIButton:onButtonStateChange(callback)监听</li>
</ul>
<h5 id="2-1-UIPushButton"><a href="#2-1-UIPushButton" class="headerlink" title="2.1 UIPushButton"></a>2.1 UIPushButton</h5><p>创建方式：</p>
<pre><code>cc.ui.UIPushButton.new(images, options)
-- images：table类型。各个状态的图片。
-- options：table类型。可选参数，scale9, flipX,flipY
</code></pre><p>例：</p>
<pre><code>function MainScene:ctor()

    local images = {
        normal = &quot;button/Buttono1.png&quot;
        pressed = &quot;button/Buttono2.png&quot;
        disabled = &quot;button/Buttono3.png&quot;
    }    

    cc.ui.UIPushButton.new(images, {scale9 = true})
        :setButtonSize(240, 60),
        :setButtonLabel(&quot;normal&quot;, cc.ui.UILabel.new({
            UILabelType = 2,
            text = &quot;This is a PushButton&quot;,
            size = 18
        }))
        :setButtonLabel(&quot;pressed&quot;, cc.ui.UILabel.new({
            UILabelType = 2,
            text = &quot;This is a PushButton&quot;,
            size = 18
        }))
        :setButtonLabel(&quot;disabled&quot;, cc.ui.UILabel.new({
            UILabelType = 2,
            text = &quot;This is a PushButton&quot;,
            size = 18
        }))
        :onButtonClicked(function(event) 
            print(&quot;pushButton click&quot;)
        end)
        :align(display.LEFT_CENTER, display.left + 80, display.top - 80)
        :addTo(self)

end
</code></pre><h5 id="2-2-UICheckBoxButton"><a href="#2-2-UICheckBoxButton" class="headerlink" title="2.2 UICheckBoxButton"></a>2.2 UICheckBoxButton</h5><p>UICheckBoxButton相当于一个开关，单击按钮在on与off之间切换。创建方式：</p>
<pre><code>cc.ui.UICheckBoxButton.new(images, options)
-- 参数如同UIPushButton
</code></pre><p>例：</p>
<pre><code>function MainScene:ctor()

    local images = {
        off = &quot;button/button1.png&quot;,
        off_pressed = &quot;button/button2.png&quot;,
        off_disabled = &quot;button/button3.png&quot;,
        on = &quot;button/button4.png&quot;,
        on_pressed = &quot;button/button5.png&quot;,
        on_disabled = &quot;button/button6.png&quot;
    }

    local function updateCheckBoxButtonLabel(checkbox)
        local state = &quot;&quot;
        if checkbox:isButtonSelected() then
            state = &quot;on&quot;
        else
            state = &quot;off&quot;
        end
        if not checkbox:isButtonEnabled() then
            state = state..&quot;(disabled)&quot;
        end
        checkbox:setButtonLabelString(string.format(&quot;state is %s&quot;, state))
    end

    local checkBoxButton = cc.ui.UICheckBoxButton.new(image)
        :setButtonLabel(cc.ui.UILabel.new({text = &quot;&quot;, size = 22, color = cc.c3b(255, 96, 255)}))
        :setButtonLabelOffset(0, -40)
        :setButtonLabelAlignment(display.CENTER)
        :onButtonStateChange(function(event)
            updateCheckBoxButtonLabel(event.target) 
        end)
        :align(display.LEFT_CENTER, display.left + 40, display.top - 180) --设置锚点和位置
        ：addTo(self)

    updateCheckBoxButtonLabel(checkBoxButton1)

end
</code></pre><h5 id="2-3-UICheckBoxButtonGroup"><a href="#2-3-UICheckBoxButtonGroup" class="headerlink" title="2.3 UICheckBoxButtonGroup"></a>2.3 UICheckBoxButtonGroup</h5><p>UICheckBoxButtonGroup用来创建一组选项，一个时刻只有一项能被选中。创建方式：</p>
<pre><code>cc.ui.UICheckBoxButtonGroup.new(direction)
--direction,integer类型，可选值：
--display.LEFT_TO_RIGHT
--display.RIGHT_TO_LEFT
--display.TOP_TO_BOTTOM
--display.BOTTOM_TO_TOP

function MainScene:ctor()

    local images = {
        off = &quot;button/button1.png&quot;,
        off_pressed = &quot;button/button1.png&quot;,
        off_disabled = &quot;button/button1.png&quot;,
        on = &quot;button/button1.png&quot;,
        on_pressed = &quot;button/button1.png&quot;,
        on_disabled = &quot;button/button1.png&quot;,
    }

    local group = cc.ui.UICheckBoxButtonGroup.new(display.TOP_TO_BOTTOM)
        :addButton(cc.ui.UICheckBoxButton.new(images)
            :setButtonLabel(cc.ui.UILabel.new({text = &quot;option 1&quot;, color = display.COLOR_WHITE}))
            :setButtonLabelOffset(20, 0)
            :align(display.LEFT_CENTER))
        :addButton(cc.ui.UICheckBoxButton.new(images)
            :setButtonLabel(cc.ui.UILabel.new({text = &quot;option 2&quot;, color = display.COLOR_WHITE}))
            :setButtonLabelOffset(20, 0)
            :align(display.LEFT_CENTER))
        :addButton(cc.ui.UICheckBoxButton.new(images)
            :setButtonLabel(cc.ui.UILabel.new({text = &quot;option 3&quot;, color = display.COLOR_WHITE}))
            :setButtonLabelOffset(20, 0)
            :align(display.LEFT_CENTER))
        :addButton(cc.ui.UICheckBoxButton.new(images)
            :setButtonLabel(cc.ui.UILabel.new({text = &quot;option 4&quot;, color = display.COLOR_WHITE}))
            :setButtonLabelOffset(20, 0)
            :align(display.LEFT_CENTER))
        :setButtonLayoutMargin(10, 10, 10, 10)
        :onButtonSelectChanged(function(event)
            printf(&quot;-----------&quot;) 
        end)
        :align(display.LEFT_CENTER, diaplay.left + 40, display.top - 440)
        :addTo(self)
end
</code></pre><h3 id="3-输入控件"><a href="#3-输入控件" class="headerlink" title="3 输入控件"></a>3 输入控件</h3><p>#####3.1 创建</p>
<pre><code>cc.ui.UIInput.new(options)
--options可选参数如下：
--image：输入框的图像，可以是图像名或是display.newScale9Sprite()创建的Sprite9Scale对象。
--imagePressed：输入状态时显示的图像
--imageDisabled：禁止输入状态显示的图像
--listener：回调函数，监听输入事件
--size：输入框的尺寸
--x,y
</code></pre><p>#####3.2 获取文本</p>
<pre><code>local text = editbox:getText()
</code></pre><p>#####3.3 设置提示信息</p>
<pre><code>editbox:setPlaceHolder(&quot;请输入密码&quot;)
</code></pre><p>#####3.4 设置显示文本</p>
<pre><code>editbox：setText(“&quot;)
</code></pre><p>#####3.5 监听输入事件</p>
<p>#####3.6 密码输入</p>
<pre><code>editbox:setInputFlag(0)
</code></pre><p>例：</p>
<pre><code>local funciton onEdit(event, editbox)

    if event == &quot;begin&quot; then
        -- 开始输入，Player模拟器上没有这个事件
    elseif event == &quot;changed&quot; then
        -- 内容发生改变
    elseif event == &quot;ended&quot; then
        -- 输入结束
    elseif event == &quot;return&quot; then
        -- 从输入框返回，响应手机上的return按钮
    end

    local editbox = cc.ui.UIInput.new(
        image = &quot;editbox.png&quot;,
        listener = onEdit,
        x = display.width/2,
        y = display.height/2,
        size = cc.size(200, 40)
    )

    self:addChild(editbox)
    editbox:setPlaceHolder(&quot;&quot;)

end
</code></pre><h3 id="4-进度条"><a href="#4-进度条" class="headerlink" title="4 进度条"></a>4 进度条</h3><p>#####4.1 创建</p>
<pre><code>cc.ui.UILoadingBar.new(option)
-- option可选参数如下
-- scale9,boolean类型，表示是否缩放
-- capInsets，cc.rect类型，设置图片的绽放区域，避免缩放导致图片模糊失真。
-- image，string类型，表示进度条的图片
-- viewRect，cc.rect类型，表示显示区域
-- percent，int类型，表示初始化进度
-- direction，方向，默认从左到右。可选有：UILoadingBar.DIRECTION_LEFT_TO_RIGHT,UILoadingBar.DIRECTION_RIGHT_TO_LEFT
</code></pre><p>#####4.2 更新</p>
<pre><code>loadBar:setPercent(percent)
</code></pre><p>例：</p>
<pre><code>local loadBar = cc.ui.UILoadingBar.new({
    scale9 = true,
    capInsets = cc.rect(0, 0, 10, 10),
    image = &quot;loading.png&quot;,
    viewRect = cc.rect(0, 0, 200, 32),
    percent = 30,
    direction = DIRCTION_RIGHT_TO_LEFT
}) 
:addTo(self)
</code></pre><h3 id="5-滑动条"><a href="#5-滑动条" class="headerlink" title="5 滑动条"></a>5 滑动条</h3><p>#####5.1 创建</p>
<pre><code>cc.ui.UISlider.new(direction, images, options)

1.direction，number类型，表示滑动方向
    display.LETF_TO_RIGHT
    diaplay.TOP_TO_BOTTOM

2.images，table类型，可用参数如下：
    bar string类型，滑动条图片路径
    button string类型，滑块图片路径

3.options，table类型，可用参数如下：
    scale9 boolean，图片是否可缩放
    min number，最少的值是0
    max number，最大默认是100
    touchInButton boolean，是否只在触摸在滑动块上时才有效，默认为true。
</code></pre><p>#####5.2 修改滑动条大小</p>
<pre><code>UISlider:setSliderSize(barWidth, batHeight)
</code></pre><p>#####5.3 滑动块位置</p>
<pre><code>UISlider:setSliderValue(value)

UISlider:getSliderValue()
</code></pre><p>#####5.4 事件监听</p>
<ul>
<li><p>PRESSED_EVENT，按下滑动块事件，监听方法如下：</p>
<p>  UISlider:onSliderPressed(function(event) end)</p>
<p>  event.x，event.y触摸点y坐标</p>
</li>
<li><p>PELEASE_EVENT，释放滑动块事件，监听方法如下：</p>
<p>  UISlider:onSliderRelease(function(event) end)</p>
<p>  event.x, event.y，触摸点坐标</p>
</li>
<li><p>STATE_CHANGED_EVENT，状态改变事件，监听方法如下：</p>
<p>  UISlider:onSliderStateChange(function(event) end)</p>
<p>  调用UISlider:setSliderEnabled(enabled)的时候触发这个消息</p>
</li>
<li><p>VALUE_CHANGED_EVENT，值改变事件</p>
<p>  UISlider:onSliderValueChange(function(event) end)</p>
<p>  event.value中存放改变后的值</p>
</li>
</ul>
<p>例：</p>
<pre><code>local images = {
    bar = &quot;slider/SliderBar.png&quot;
    button = &quot;slider/SliderButton.png&quot;
}    

local barHeight = 40
local barWidth = 400
local balueLabel = cc.ui.UILabel.new({text = &quot;&quot;, size = 14, color = display.COLOR_BLACK})
    :align(display.LEFT_CENTER, display.left + barWidth + 60, dispaly.top - 60)
    :addTo(self)

cc.ui.UISlider.new(display.LEFT_TO_RIGHT, images, {scale9 = true})
    :onSliderValueChanged(function(event) 
        valueLabel:setString(string.format(&quot;value = %0.2f&quot;, event.value))
        print(event.name)
    end)
    :onSliderStateChange(function(event)
        print(event.name)
    end)
    :onSliderPressed(function(event)
        print(event.name)
    end)
    :onSliderRelease(function(event)
        print(event.name)
    end)
    :setSliderSize(barWidth, batHeight)
    :setSliderValue(75)
    :align(display.LEFT_CENTER, display.left + 40, display.top - 80)
    :addTo(self)
</code></pre><h3 id="6-滚动视图"><a href="#6-滚动视图" class="headerlink" title="6 滚动视图"></a>6 滚动视图</h3><p>#####6.1 创建</p>
<pre><code>cc.ui.UIScrollView.new(params)
--可选参数如下：
1.direction，可选：
    UIScrollView.DIRECTION_BOTH
    UIScrollView.DIRECTION_VERTICAL
    UIScrollView.DIRECTION_HORIZONTAL
2.viewRect：表示列表控件的显示区域
3.scrollbarImgH:string类型，表示水平方向的滚动条图片资源路径。
4.scrollbarImgV:string类型，表示垂直方向的滚动条图片资源路径。
5.bgColor：c4b类型，表示背景色，nil表示无背景色。
6.bgStarColor：c4b类型，表示渐变背景开始色，nil表示无背景色。
7.bgEndColor：c4b类型，表示渐变背景结束色，nil表示无背景色。
8.bg，string类型，表示背景图片资源路径。
9.bgScale9，boolean类型，表示背景图片是否可缩放。
10.capInsets，rect类型，表示缩放区域。
</code></pre><p>#####6.2 回弹效果</p>
<pre><code>UIScrollView:setBounceable(false)
-- 禁用回弹效果
</code></pre><p>#####6.3 事件监听</p>
<pre><code>UIScrollView:onScroll(function(event)
    print(&quot;ScrollListener:&quot;..event.name)
end)
1.began阶段
2.moved阶段
3.ended阶段
</code></pre><p>例：</p>
<pre><code>local sp = display.newSprite(&quot;scroll/cloud.png&quot;)
sp:pos(display.cx, display.cy)

cc.ui.UIScrollView.new({
    direction = cc.ui.UIScrollView.DIRECTION_BOTH,
    viewRect = {x = 0, y = 0, width = 320, height = 480},
    scrollbarImgH = &quot;scroll/barH.png&quot;,
    scrollbarImaV = &quot;scroll/bar.png&quot;,
    bgColor = cc.c4b(255, 255, 255, 255)
})
:addScrollNode(sp)
:setDirection(cc.ui.UIScrollView.DIRECTION_BOTH)
:onScroll(function(event)
    print(&quot;TestUIScrollViewSene - scrollListener:&quot;..event.name)
end)
:addTo(self)
:pos(display.cx - 160, display.cy - 240)
:setBounceable(false)
</code></pre><h3 id="7-列表"><a href="#7-列表" class="headerlink" title="7 列表"></a>7 列表</h3><p>#####7.1 创建</p>
<pre><code>cc.ui.UIListView.new(params)
可用参数如下：
1.direction，默认为垂直
    UIScrollView.DIRECTION_VERTICAL 垂直
    UIScrollView.DIRECTION_HORIZONTAL 水平
2.alignment content对齐方式，默认为垂直居中
    UIListView.ALIGNMENT_LEFT
    UIListView.ALIGNMENT_RIGHT
    UIListView.ALIGNMENT_VCENTER
    UIListView.ALIGNMENT_TOP
    UIListView.ALIGNMENT_BOTTOM
    UIListView.ALIGNMENT_HCENTER
3.viewRect，表示列表控件的显示区域
4.scrollbarImgH，string类型，表示水平方向的滚动条图片资源路径。
5.scrollbarImgV，string类型，表示水平方向的滚动条图片资源路径。
6.bgColor，c4b类型，背景色。
7.bgStartColor
8.bgEndColor
9.bg，string，表示背景图片资源
10. bgScale9，表示背景图是否可缩放
11. capInsets，rect类型，表示缩放区域
</code></pre><p>#####7.2 创建列表项</p>
<p>可以使用UIlistViewItem的new方法来创建一个表项，但这并不是推荐的方法。UIListView内部封装一个创建表项的成员函数，它针对当前表的属性在item上做了额外的初始化。</p>
<pre><code>local list = cc.ui.UIListView:new(params)
local item = list:newItem(contentNode)
--contentNode：可显示的节点类型
--可不传contentNode，通过item:addContent(contentNode)来设置显示节点
</code></pre><p>UIListViewItem是为UIListView服务的，除了contentNode，它还有重要的功能即约束当前列表的宽高。它提供如下接口：</p>
<ul>
<li>UIListViewItem:setItemSize(w, h, bNoMargin)设置表项的宽高。</li>
<li>UIListViewItem:setMargin(margin)设置表项之间的间隙。margin的默认为：{left = 0, right = 0, top = 0, bottom = 0}</li>
</ul>
<p>例：</p>
<pre><code>在MainScene的ctor方法中加入如下代码：

local function touchListener(event)
    local listView = event.listView
    if &quot;clicked&quot; == event.listView then
        if 3 == event.itemPos then
            listView:removeItem(event.item, true)
        end
    end
end

self.lv = cc.ui.UIListView.new{
    bgColor = cc.c4b(200, 200, 200, 200),
    -- bg = &quot;list/sunset.png&quot;,
    bgScale9 = true,
    viewRect = cc.rect(40, 80, 120, 400),
    direction = cc.ui.UIScrollView.DIRECTION_VERTICAL,
    scrollbarImgV = &quot;list/bar.png&quot;    --滚动条图片
}
    :onTouch(touchListener)
    :addTo(self)

for i = 1, 15 do

    local item = self.lv:newItem()
    local const

    if 2 == i then

        content = cc.ui.UIPushButton.new(&quot;list/GreenButton.png&quot;, {scale9 = true})
            :setButtonSize(120, 40)
            :setButtonLabel(cc.ui.UILabel.new({text = &quot;单击大小改变&quot;}..i, size = 16, color = display.COLOR_BLUE}))
            :onButtonPressed(function(event)
                event.target:getButtonLabel():setColor(display.COLOR_RED)
            end)            
            :onButtonReleased(function(event) 
                event.target:getButtonLabel():setColor(display.COLOR_BLUE)
            end)
            :onButtonClicked(function(event)

                if not self.lv:isItemInViewRect(item) then
                    print(&quot;TestUIListViewScene item not in view rect&quot;)
                    return
                end 
                print(&quot;TestUIListViewScene buttonClick&quot;)
                local _, h = item:getItemSize()

                if 40 = h then
                    item:setItemSize(120, 80)        
                else
                    item:setItemSize(120, 40)
                end                    
            end)

    elseif 3 == i then

        content = cc.ui.UILabel.new({
            text = &quot;单击删除它&quot;..i，
            size = 20,
            align = cc.ui.TEXT_ALIGN_GENTER,
            color = display.COLOR_BLACK
        })

        item:setBg(&quot;list/YellowBlock.png&quot;)

    elseif 4 == i then

        content = cc.ui.UILabel.new({
            text = &quot;有背景图&quot;..i,
            size = 20,
            align = cc.ui.TEXT_ALIGN_CENTER,
            color = display.COLOR_BLACK
        })

        item:setBg(&quot;list/YellowBlock.png&quot;)

    else

        content = cc.ui.UILabel.new({
            text = &quot;item&quot;..i,
            size = 20,
            align = cc.ui.TEXT_ALIGN_CENTER,
            color = display.COLOR_BLACK
        })

    end

    item:addContent(content)
    iten:setItemSize(120, 40)

    self.lv.addItem(item)

end

self.lv:reload()
</code></pre><p>上例展示了4种不同item用法，应用了UIListView的大部分功能。</p>
<p>（1） 列表1的contentNode是一个文本标签，显示当前item的编号。</p>
<p>（2） 列表2的contentNode是一个按钮</p>
<ul>
<li>self.lv:isItemInViewRect(item)列表视图可滚动查看这个接口判断item是否在可视区域内。</li>
<li>item:getItemSize()有两个返回值，item的高和宽</li>
</ul>
<p>（3） 列表3和列表1的区别仅仅在于文字，单击可以删除。实现该功能需要监听ListView的事件。</p>
<pre><code>self.lv:onTouch(function(event) end)
enent.name是事件类型，当它为clicked时，event还据有下面域：
1.item被单击的列表项实体
2.itemPos被单击在表中的位置
3.listView 表实例
4.point包含触摸点x,y的table

listView:removeItem(event.item, true)
第一个参数是被移除的项，第二个参数是是否使用移除动画。
</code></pre><p>（4） 列表4使用新的接口item:setBg(bgName)设置背景图片。</p>
<h3 id="8-分页"><a href="#8-分页" class="headerlink" title="8 分页"></a>8 分页</h3><p>#####8.1 视图</p>
<pre><code>cc.ui.UIPageView(params)
可选参数如下：
1.column，number类型，表示每一页的列数。
2.row，表示每一页的行数
3.columnSpace，表示列之间的间隙
4.rowSpace，表示行之间的间隙
5.viewRect，表示页面控件的显示区域
6.padding，table，表示页面四周的间隙 
    left
    rignt
    top
    bottom
7.bCirc，表示页面是否循环
</code></pre><p>#####8.2 创建项</p>
<p>同ListView一样，推荐使用UIPageView的成员函数来创建分页项。</p>
<pre><code>local page = cc.ui.UIPageViewItem.new();
local item = page.newItem
</code></pre><p>#####8.3 监听</p>
<pre><code>UIPageView:onTouch(function(event) 
    dump(event, &quot;TestUIPageViewScene--evnet&quot;)
end)
</code></pre><p>例：</p>
<pre><code>local funciton touchListener(event)
    dump(event, &quot;TestUIPageViewScene - event&quot;)
end

self.pv = cc.ui.UIPageView.new({
    viewRect = cc.rect(80, 240, 480, 480),
    column = 3,
    row = 3,
    padding = {left = 20, right = 20, top = 20, bottom = 20},
    columnSpace = 10,
    rowSpace = 10,
    bCirc = true
})
    :onTouch(touchListener)
    :addTo(self)

for i = 1, 18 do

    local item = self.pv.newItem()
    local content = cc.LayerColor:create(
        cc.c4b(
            math.random(250),
            math.random(250),
            math.random(250),
            250
        )
    )        

    content:setContentSize = (240, 140)
    content:setTouchEnabled(false)
    item:addChild(content)
    self.pv:addItem(item)
end

self.pv:reload()
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/24/Cocos-Lua/UI/" data-id="cjov31rm8006n88rizr3qtbsg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Cocos-Lua/">Cocos-Lua</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/11/24/Cocos-Lua/事件分发机制/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          事件分发机制
        
      </div>
    </a>
  
  
    <a href="/2018/11/24/Cocos-Lua/Lua-网络通信/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">网络通信</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Cococs2d与OpenGL-ES/">Cococs2d与OpenGL ES</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Cocos2d-C/">Cocos2d-C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Cocos2d-Lua/">Cocos2d-Lua</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Cocos2d与OpenGL-ES/">Cocos2d与OpenGL ES</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cococs2d与OpenGL-ES/">Cococs2d与OpenGL ES</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cocos-C/">Cocos-C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cocos-Lua/">Cocos-Lua</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lua/">Lua</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Cococs2d与OpenGL-ES/" style="font-size: 12.5px;">Cococs2d与OpenGL ES</a> <a href="/tags/Cocos-C/" style="font-size: 20px;">Cocos-C++</a> <a href="/tags/Cocos-Lua/" style="font-size: 17.5px;">Cocos-Lua</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Lua/" style="font-size: 15px;">Lua</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/11/24/Cocos-C++-P/3.2 精灵/">3.2 精灵</a>
          </li>
        
          <li>
            <a href="/2018/11/24/Cocos-C++-P/3.1（2） 纹理压缩及应用/">3.1(2) 纹理压缩及应用</a>
          </li>
        
          <li>
            <a href="/2018/11/24/Cocos-C++-P/3.1（1） 纹理/">3.1 纹理</a>
          </li>
        
          <li>
            <a href="/2018/11/24/Cocos-C++-P/3 全新的绘制系统/">全新的绘制系统</a>
          </li>
        
          <li>
            <a href="/2018/11/24/Cocos-C++-P/2.2 OpenGL ES 着色程序/">OpenGL ES着色程序</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Zenos<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>